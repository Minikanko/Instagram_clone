<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.ksh.insta.model.mapper.PostMapper">
	<sql id="selectPostAll">
		select post_no,id,comments from post
	</sql>
	<resultMap type="postVO" id="pvm">
		<association property="memberVO.id" column="id"></association>
		<association property="memberVO.name" column="name"></association>
		<association property="memberVO.nickName" column="nick_name"></association>
		<association property="memberVO.profilePic" column="profile_pic"></association>
	</resultMap>
	<insert id="registerPost" parameterType="postVO">
		<selectKey keyProperty="postNo" resultType="string" order="BEFORE">
			select post_seq.nextval from dual
		</selectKey>
		insert into post(post_no,id,comments) values(#{postNo},#{memberVO.id},#{comments})
	</insert>
	<insert id="registerPostPic" parameterType="postPicVO">
		insert into post_pic(pic_no,post_no,pic) values(post_pic_seq.nextval,#{postNo},#{pic})
	</insert>
	
	<delete id="deletePost" parameterType="postVO">
		delete from post where post_no=#{postNo}
	</delete>
	
</mapper>